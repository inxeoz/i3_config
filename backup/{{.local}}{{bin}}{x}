#!/bin/bash

# x: run command, show real-time output, save to file, copy output to clipboard at end

TMP_FILE=$(mktemp)
trap 'cat "$TMP_FILE" | xclip -selection clipboard; rm -f "$TMP_FILE"; echo -e "\n\nðŸ“‹ Output copied to clipboard.";' EXIT

if [ $# -eq 1 ]; then
    if [ -f "$1" ]; then
        # Single argument is a file â†’ cat it
        set -- cat "$1"
    elif [ -d "$1" ]; then
        # Single argument is a directory â†’ ls it
        set -- ls "$1"
    fi
fi

# Run the command and tee output to both terminal and temp file
"$@" 2>&1 | tee "$TMP_FILE"
